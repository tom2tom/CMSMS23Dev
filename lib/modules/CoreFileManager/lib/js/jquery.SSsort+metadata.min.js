/*!
metadata plugin for jQuery
Copyright (C) 2006 John Resig, Yehuda Katz, JÃ¶rn Zaefferer, Paul McLanahan
Dual licensed: MIT and GPL
*/
;(function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(type,name){this.defaults.type=type;this.defaults.name=name},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);if(!settings.single.length){settings.single="metadata"}var data=$.data(elem,settings.single);if(data){return data}data="{}";if(settings.type=="class"){var m=settings.cre.exec(elem.className);if(m){data=m[1]}}else{if(settings.type=="elem"){if(!elem.getElementsByTagName){return undefined}var e=elem.getElementsByTagName(settings.name);if(e.length){data=$.trim(e[0].innerHTML)}}else{if(elem.getAttribute!=undefined){var attr=elem.getAttribute(settings.name);if(attr){data=attr}}}}if(data.indexOf("{")<0){data="{"+data+"}"}data=eval("("+data+")");$.data(elem,settings.single,data);return data}}});$.fn.metadata=function(opts){return $.metadata.get(this[0],opts)}})(jQuery);
/*!
jQuery plug-in SSsort table-sorter/pager V.0.5
(C) 2014-2018 Tom Phane
License: GNU Affero GPL V.3 or later
*/
;(function($){$.fn.SSsort=function(d){function j(s){s.pagecount=((s.rows.length/s.pagesize)|0)+1}function m(t,s){var x=parseInt(s.pagesize,10);if(s.currentid){if(x<1){s.currentpage=1}else{s.currentpage=((t/x)|0)+1}$("#"+s.currentid).html(s.currentpage)}var w=s.rows;if(x<1){x=w.length+1}var v=t+x;for(var u=0;u<w.length;u++){w[u].style.display=(u>=t&&u<v)?"":"none"}}function a(z){var u=z.works[z.sortcol];var s=u.parser.format;var B=z.rows;var x=B.length;var A=z.sortcol;var w=[];var v;for(var y=0;y<x;y++){v=B[y].cells[A];w[y]=[s(g(v),v,z),y]}var t;if(u.parser.type=="text"){t=(z.sortdesc)?function(D,C){return(C[0].localeCompare(D[0]))}:function(D,C){return(D[0].localeCompare(C[0]))}}else{t=(z.sortdesc)?function(D,C){return(C[0]-D[0])}:function(D,C){return(D[0]-C[0])}}u._map=w.sort(t)}function n(y){var s=$(this).closest("table");var w=$.data(s[0],"SSsortcfg");if(w.rows.length<2){return}var u=this.cellIndex;var D=w.header.find("tr:first > th");var t=0;if(u>0){for(var v=0;v<u;v++){var C=D[v];if(C.hasAttribute("colspan")){var B=C.getAttribute("colspan");t+=parseInt(B,10)||1}else{t++}}}var z=null,x,A;if(t==w.sortcol){x=(w.sortdesc)?w.descClass:w.ascClass;w.sortdesc=!w.sortdesc;A=(w.sortdesc)?w.descClass:w.ascClass;if(x){D.eq(t).removeClass(x)}if(A){D.eq(t).addClass(A)}$(w.table).trigger("beforetablesort",{column:t,direction:w.sortdesc});if(w.works[t].dirty){a(w)}else{w.works[t]._map.reverse()}}else{if(w.sortcol!==null){z=w.sortcol;x=(w.sortdesc)?w.descClass:w.ascClass;if(x){D.eq(z).removeClass(x)}if(w.sortClass){D.eq(z).addClass(w.sortClass)}if(w.ascClass){D.eq(t).addClass(w.ascClass)}w.sortdesc=false}else{if(w.sortClass){D.eq(t).removeClass(w.sortClass)}A=(w.sortdesc)?w.descClass:w.ascClass;if(A){D.eq(t).addClass(A)}}w.sortcol=t;$(w.table).trigger("beforetablesort",{column:t,direction:w.sortdesc});a(w)}setTimeout(function(){var K=(w.oddClass)?new RegExp("(^|\\s+)"+w.oddClass+"(?!\\S)"):false;var O=(w.evenClass)?new RegExp("(^|\\s+)"+w.evenClass+"(?!\\S)"):false;var N=(w.oddClass)?new RegExp("(^|\\s+)"+w.oddsortClass+"(?!\\S)"):false;var E=(w.evenClass)?new RegExp("(^|\\s+)"+w.evensortClass+"(?!\\S)"):false;var L=w.body[0];var P=L.parentNode;var S=L.nextSibling;var R=w.rows;var G=R.length;var F=w.works[t]._map;var Q,M,I,H;P.removeChild(L);for(var J=0;J<G;J++){I=F[J][1];Q=R[I];C=Q.cells[t];L.appendChild(Q);if(J%2){if(K){Q.className=Q.className.replace(K,"")}if(O&&!Q.className.match(O)){Q.className=Q.className+" "+w.evenClass}if(N){C.className=C.className.replace(N,"")}if(E&&!C.className.match(E)){C.className=C.className+" "+w.evensortClass}}else{if(O){Q.className=Q.className.replace(O,"")}if(K&&!Q.className.match(K)){Q.className=Q.className+" "+w.oddClass}if(E){C.className=C.className.replace(E,"")}if(N&&!C.className.match(N)){C.className=C.className+" "+w.oddsortClass}}if(z!==null){M=Q.cells[z];if(N){M.className=M.className.replace(N,"")}if(E){M.className=M.className.replace(E,"")}}F[J][1]=J;for(H=J+1;H<G;H++){if(F[H][1]>I){F[H][1]--}}}P.insertBefore(L,S);w.body=$(w.table).children("tbody");w.rows=L.rows;w.works[t].dirty=(typeof(w.works[t].parser.watch)!=="undefined"&&w.works[t].parser.watch);if(w.paginate){w.currentpage=1;j(w);m(0,w);if(w.countid){$("#"+w.countid).html(w.pagecount)}}$(w.table).trigger("aftertablesort",{column:t,direction:w.sortdesc});$.isFunction(w.onSorted)&&w.onSorted.call(w.table)},20)}function g(t){while(t.hasChildNodes()){t=t.firstChild}var s=t.nodeValue;return(s)?s:false}function k(A,v){var y=false,s,C=v.rows,x=0,B;while(y===false){B=C[x];if(B){s=B.cells[A];y=$.trim(g(s))}else{break}x++}var z=$.fn.SSsort.parsers;if(y!==false){var w=$.fn.SSsort.ipcount,t=z.length;for(var u=w;u<t;u++){if(z[u].is(y,s,v)){return z[u]}}for(u=1;u<w;u++){if(z[u].is(y,s,v)){return z[u]}}}return z[0]}function p(u){var w=$.fn.SSsort.parsers,x=$.fn.SSsort.ipcount,s=w.length,t=u.toLowerCase();for(var v=x;v<s;v++){if(w[v].id.toLowerCase()==t){return w[v]}}for(v=0;v<x;v++){if(w[v].id.toLowerCase()==t){return w[v]}}return false}function b(v,s){var w=false;if($.metadata){var u=$(v).metadata().sss;if(u===false){return false}else{if(u){w=p(u)}}}if(!w){var t=v.cellIndex;w=k(t,s)}return w}var f={sortClass:null,ascClass:null,descClass:null,evenClass:null,oddClass:null,evensortClass:null,oddsortClass:null,firstsort:null,sortdesc:false,paginate:false,pagesize:20,currentid:null,countid:null,onSorted:null};$.fn.SSsort.parsers=[{id:"text",is:function(t){return true},format:function(t){return $.trim(t)},type:"text"},{id:"number",is:function(t){return(!isNaN(parseFloat(t))&&isFinite(t))},format:function(t){if(t){var u=Number(t);return(isNaN(u))?Number.NEGATIVE_INFINITY:u}else{if((t+"").length>0){return 0}else{return Number.POSITIVE_INFINITY}}},type:"numeric"},{id:"isoDate",is:function(t){return/^[12]\d{3}[\/-][01]\d[\/-]\[0-3]\d$/.test(t)},format:function(t){return Date.parse(t.replace(/-/g,"/"))},type:"numeric"}];var o=$.fn.SSsort.parsers.length;function c(u,w,t){var s=$.data(u,"SSsortcfg");if(s){var v=(w)?((t)?s.pagecount:s.currentpage+1):((t)?1:s.currentpage-1);if(v>0&&v<=s.pagecount){s.currentpage=v;m((v-1)*s.pagesize,s)}}}function e(u,v,t){var s=$.data(u,"SSsortcfg");if(s){s[v]=t;m(0,s);if(s.countid){j(s);$("#"+s.countid).html(s.pagecount)}}}function q(u){var s={};var t=1;$(u).find("tr").each(function(){var v=this.getAttribute("id")||this.getAttribute("name")||"row"+t;var x={};var w=1;$(this).each(function(){var z=[];$(this).children().each(function(){z[z.length]=(this.hasAttribute("value"))?this.getAttribute("value"):$(this).text()});var B=this.getAttribute("id")||this.getAttribute("name")||"col"+w;switch(z.length){case 0:x[B]="<empty>";break;case 1:x[B]=z[0];break;default:var A={};for(var y=0;y<z.length;++y){A[y]=z[y]}x[B]=A;break}w++});s[v]=x;t++});return s}function l(x,w){var v=x.id.toLowerCase();var u=$.fn.SSsort.parsers;var s=u.length;for(var t=0;t<s;t++){if(u[t].id.toLowerCase()==v){if(w){u[t]=x}return}}u[s]=x}function i(t){var u=parseFloat(t);return(isNaN(u))?Number.NEGATIVE_INFINITY:u}function r(t){var u=parseInt(t,10);return(isNaN(u))?Number.NEGATIVE_INFINITY:u}var h={table:null,header:null,body:null,rows:null,sortcol:null,sortdata:[],currentpage:1,pagecount:1,works:[]};this.each(function(){var t=$.extend(h,f,d||{});t.table=this;var z=$(this);t.header=z.children("thead");t.body=z.children("tbody");t.rows=t.body[0].rows;t.works=[];var s=t.header.find("tr:first > th");var v=$.fn.jquery;var y=$.metadata;var u=0;s.each(function(){var B=$(this);var A=B.hasClass("nosort");if(!A&&y){if(B.metadata().sss===false){A=true}}if(!A){var C=b(this,t);if(C){t.works[u]={parser:C,dirty:true,_map:[]};if(t.rows.length>1&&t.sortClass){B.addClass(t.sortClass)}if(v>="1.7"){B.on("click",n)}else{B.bind("click",n)}}}u++});$.data(this,"SSsortcfg",t);if(t.firstsort!==null){var x=s.eq(t.firstsort-1);var w=x.hasClass("nosort");if(!w&&y){if(x.metadata().sss===false){w=true}}if(w){t.firstsort=null}else{x.trigger("click")}}if(t.firstsort===null&&t.paginate){j(t);m(0,t);if(t.countid){$("#"+t.countid).html(t.pagecount)}}});return this}})(jQuery);
